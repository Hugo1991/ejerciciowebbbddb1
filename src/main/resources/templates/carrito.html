<html>
<head>  
        
        <link href="css/bootstrap.min.css" rel="stylesheet"/>
        <link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
        <script src="js/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
        <script src="js/modal.js"></script>
</head>
<body>
<div id="pagina">
    <div id="super">
    <header>
        <h1 id="logo" class="logo" itemscope="" itemtype="http://schema.org/Organization">
            <a itemprop="url" href="/" title="back_to_home"  onclick="Webtrends.multiTrack({argsa: ['WT.dl', '99','DCSext.hdr_type','logo PIX']})">
				<img itemprop="logo" src="img/poxmania.png" alt="Poxmania"/>
			</a>
        </h1>
       <form class="search" id="searchForm" method="POST"  action="/index">
	       <fieldset>
		      <span class="icon-search"></span>
		      <input class="searchInput" id="search" name="find" data-search-url="http://www.pixmania.es/autocomplete/q/placeholder/ajax.html" data-min-chars="1" type="search" autocomplete="off" spellcheck="false" placeholder="¿Qué estás buscando?" dir="ltr" required="true"/>
		      <input type="hidden" value="keyword_search" name="subaction"/>
		      <button id="search_bttn" class="button btn btnBold" type="submit"> Buscar</button>
	       </fieldset>
        </form>	
        <div class="toolbar">
            
            <button id="micuenta" class="button btn btnBold" type="submit">Mi Cuenta</button>
            	<a href="/mostrarCarrito">
                    <button id="search_bttn" class="button btn btnBold" type="submit">
                        Cesta
                        <span class="ico-pedidos">
                            <span  th:text="|${carrito.getNumeroProductos()}|" class="carrito">0</span>
                        </span>
                    </button>
                </a>
        </div>
    </header>
    <div id="seleccion">
        <ul class="nav">
            <li><a href="/">Home</a></li>
            <li><a href="/index?find=Pequeños electrodomesticos">Pequeños electrodomésticos</a></li>
            <li><a href="/index?find=Televisiones">Televisiones</a></li>
			<li><a href="/index?find=Informatica">Informatica</a></li>
            <li><a href="/index?find=Videoconsolas">Videoconsolas</a></li>
        </ul>
    </div>
    </div>
    <div id="cuerpo">      
                <!--Ignacio de lucas & Hugo Fernandez Visier-->
                <div class="panel panel-default" id="contenido">            
                    <div class="container-fluid">
                        <div id="informacion">
                            <div class="panel panel-default" id="infor">
                                <div class="panel-heading" id="titulo">
                                    <h3 id="cesta">Mi Cesta</h3>
                                </div>
                                <div class="panel-body" id="panel">
                                	<!--<div th:if="${carrito.contador(producto)<=1}">-->
                                        <div th:each="producto : ${carrito.getCarrito()}">
                                        
                                             <div  class="panel panel-default" id="pro">
				                        <div class="prod_list">
					                       <div id="imgProd_nomProd">
						                      <img th:src="|${producto.getProducto().getImagen()}|" id="img_prod"/>
                                               <a th:href="@{/producto(idProducto=${producto.getProducto().getId()})}" 
												th:text="|${producto.getProducto().getNombre()}|"/>
					                       </div>
                                            <div class="cantidad">
												<form th:action="@{/addCarrito}" method="POST">
													<input th:value="${producto.getProducto().getId()}" type="hidden" th:name="idProducto"/>
                                                    <textarea type="text" class="estilotextarea" name="cantidad" th:text="|${producto.getCantidad()}|"/>                                                		
                                            		<button id="search_bttn" type="submit">actualizar cantidad</button>
                                                </form>
                                                <form action="/eliminarCarrito" method="POST">
                                                	<input th:value="${producto.getProducto().getId()}" type="hidden" th:name="idProducto"/>
                                                	<button class="eliminar" type="submit">x Eliminar</button>
                                                </form>
                                            </div>
                                            <div id="precioInfo">
                                                <span class="precioListProd">
							                         <ins itemprop="precio" th:text="|${producto.getProducto().getPrecio()}|+&euro;">&nbsp;€</ins>
                                                    <span>iva incluido</span>
								                </span>
                                           </div>
                                        </div>
                                        </div>
                                        </div>

                                <div id="hacer_pedido">
                                    <div class="panel panel-default" id="hpedido">
					                   <div id="imp_iqz">
                                            <p><b>Importe total:</b>(gastos de envío incluidos)</p>
					                   </div>
					                   <!--<form th:action="@{/crearPedido}" th:object="${carrito}" method="post">-->
											<button id="search_bttn" data-toggle="modal" data-target="#Infom-pedido" class="button btn btnBold">Hacer mi pedido</button>
                                        <!--</form>-->
                                        <div id="precioInfo">
                                            <span class="precioListProd">
							                     <ins itemprop="precio" th:text="|${carrito.getPrecioFinal()}|+&euro;">&nbsp;€</ins>
                                                 <span>iva incluido</span>
								            </span>
                                        </div>
                                    </div>
                                </div>
                                <div id="impt_bajo">
                                        <div class="panel panel-default" >
                                            <div id="datos_compra">
                                                <p><b>Importe total:</b>(gastos de envío incluidos)</p>
                                           <div id="precioInfo">
                                            <span class="precioListProd">
							                     <ins itemprop="precio" th:text="|${carrito.getPrecioFinal()}|+&euro;">&nbsp;€</ins>
							                     <span>iva incluido</span>
								            </span>
                                           </div>

                                            </div>
                                        </div>
                                    </div>
                            </div>
                        </div>  
                    </div> 
                    <div class="modal fade" id="Infom-pedido" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content"> 
                                                                    <div class="modal-header"> 
                                                                    <button type="button" class="close" data-dismiss="modal">
                                                                        <span aria-hidden="true">&times;</span>
                                                                        <span class="sr-only">Cerrar</span>
                                                                    </button> 
                                                                    <h4 class="modal-title" id="myModalLabel">Informe del pedido</h4> 
                                                                    </div> 
                                                                    <div id="Infom-pedido" class="modal-body">   
                                                                        <div>
                                                                            <table class="table">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>#</th>
                                                                                        <th>Nombre</th>
                                                                                        <th>Cantidad</th>
                                                                                        <th>Coste</th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody th:each="producto : ${carrito.getCarrito()}">>
<!--Seccion a repetir-->
                                                                                    <tr>
                                                                                        <td><img th:src="|${producto.getProducto().getImagen()}|" id="img_prod"/></td>
                                                                                        <td><a th:href="@{/producto(idProducto=${producto.getProducto().getId()})}" 
															th:text="|${producto.getProducto().getNombre()}|"/></td>
                                                                                        <td><a class="precioListProd" th:text="|${producto.getCantidad()}|"/></td>
                                                                                        <td><a class="precioListProd" th:text="|${producto.getProducto().getPrecio()}|+&euro;"/></td>
<!-- fin Seccion a repetir-->
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div> 
                                                                    <div class="modal-footer">
                                                                        <h2>Total:<p th:text="|${carrito.getPrecioFinal()}|"/></h2>
                                      <form class="form-horizontal" role="form" action="#"  th:action="@{/confirmarPedido}" method="post">
                                		<div class="form-group">
                                			<label for="inputName"  class="col-lg-2 control-label">Nombre</label>
                                			<div class="col-lg-10">
                                				<input type="name" class="form-control" placeholder="Nombre" th:value="${nombre1}" name="nombre1" />
                                			</div>
                                			<label class="col-lg-2 control-label">apellidos</label>
                                			<div class="col-lg-10">
                                				<input type="text" class="form-control" th:value="${apellidos}" name="apellidos"/>
                                			</div>
                                		</div>
                                		<button type="submit" class="btn btn-success">enviar</button>
                                		
                                        <a href="#" data-dismiss="modal" class="btn">Cerrar</a>
                                  	</form>
                                                                        
                                                                        
                                                                    </div> 
                                                                </div> 
                                                            </div> 
                                                        </div>
                    <footer></footer>
                </div>
                
    </div>
</div>
</div>
</body>
</html>